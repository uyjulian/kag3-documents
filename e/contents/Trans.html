<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from Trans.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Use transitions</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id286" name="id286">before that</a>
</h1><div class="para"><div>
　The effect of switching the screen over time, such as fade-in, fade-out, and blind, is called <a id="id287" name="id287" class="targanchor"><dfn>transition</dfn></a> (change).<br />
　Kirikiri / KAG allows you to use three types of transitions: crossfade transitions, universal transitions, and scroll transitions.<br />
　You can also use some transitions by using the extended transition plug-in (extrans.dll) (see &quot;About Transitions&quot; in the Kirikiri SDK Help).<br />
</div></div>
<h1><a id="id288" name="id288">Crossfade transition</a>
</h1><div class="para"><div>
　Crossfade transitions are simple screen transition effects.<br />
　Because it is a transition (transition), you need an image before the transition and an image after the transition. In the case of KAG, the image before the transition is the layer on the front page, and the image after the transition is the layer on the back page. In other words, the image of the layer on the back page comes to the front page.<br />
　At the beginning of the transition, the image on the front page is replaced with the image on the back page over time, and the image on the back page eventually becomes the image on the front page.<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　KAG does not have the concept of <a id="id289" name="id289" class="targanchor"><dfn>fade out</dfn></a> and <a id="id290" name="id290" class="targanchor"><dfn>fade in</dfn></a>. If you want to fade out to black, make the back page black and then apply a crossfade transition.</div><br />
</div></div>
<h1><a id="id291" name="id291">Universal transition</a>
</h1><div class="para"><div>
　A universal transition is a universal (general-purpose) transition that allows you to freely create a so-called &quot;screen transition effect&quot;.<br />
<br />
　Also, universal transitions require a grayscale image, called a <a id="id292" name="id292" class="targanchor"><dfn>rule image</dfn></a>. If the rule image size is smaller than the layer you want to transition, it will be automatically tiled and used. Use this image as a &quot;rule&quot; to advance the transition.<br />
　The required attributes for the universal transition, <a id="id293" name="id293" class="targanchor"><dfn>time</dfn></a> (time during the transition) and <a id="id294" name="id294" class="targanchor"><dfn>vague</dfn></a> (<a id="id295" name="id295" class="targanchor"><dfn>fuzzy region value</dfn></a>) Become.<br />
<br />
　For example.<br />
<br />
　Look at the image below.<br />
<br /><div class="descimg"><img width="64" height="64" alt="univtrans_A.png" src="univtrans_A.png" /><img width="64" height="64" alt="univtrans_B.png" src="univtrans_B.png" /><img width="64" height="64" alt="univtrans_R.png" src="univtrans_R.png" /><br />Before transition, after transition, rule image</div><br /><br />
　Thus, suppose that the image labeled A transitions to the image labeled B. Also suppose that the rule image is a simple but gradient image from top to bottom, black to white.<br />
<br />
　By the way, if you set <a id="id296" name="id296" class="targanchor"><dfn>vague</dfn></a> (fuzzy area value) to 1, the transition will proceed as follows. Progressing from left to right. For convenience, the transitions are shown side-by-side, but they are actually displayed consecutively in the same place.<br />
<br /><div class="descimg"><img width="320" height="64" alt="univtrans_V1.png" src="univtrans_V1.png" /><br />When vague=1</div><br /><br />
　In other words, from the black part of the rule image to the white part, the image of B is gradually being replaced.<br />
<br />
　Let's set vague=64 here.<br />
<br /><div class="descimg"><img width="320" height="64" alt="univtrans_V64.png" src="univtrans_V64.png" /><br />When vague=64</div><br />　Now, the boundary between the image of A and the image of B is blurred, right? As you can see, increasing the vague value can increase the ambiguity in the transition that is neither A nor B. vague can be a number greater than zero.<br />
<br />
　By specifying various patterns in the rule image as well as simple gradations as described above, you can freely make transitions accordingly.<br />
<br />
　In the Kirikiri download page <a target="_top" class="jump" href="http://kikyou.info/tvp/">http://kikyou.info/tvp/</a>, more than 20 types of universal transition rule images are available as &quot;<a id="id297" name="id297" class="targanchor"><dfn>Transition Library</dfn></a>&quot;. <br />
</div></div>
<h1><a id="id298" name="id298">Scroll transition</a>
</h1><div class="para"><div>
　The scroll transition is different from the universal transition in that the image of the switching source (back screen) scrolls into the area of the image of the switching destination (front screen).<br />
　The direction from which the image of the switching source (back screen) enters can be selected from four directions: left, top, right, and bottom.<br />
　There are three types of scrolling.<br />
<br />
　First, the scroll transition when &quot;stayfore&quot; is specified in the <a id="id299" name="id299" class="targanchor"><dfn>stay</dfn></a> attribute is as follows (when entering from the bottom).<br />
<br /><div class="descimg"><img width="320" height="64" alt="univtrans_Sstay.png" src="univtrans_Sstay.png" /><br />When stay=stayfore</div><br />　In this way, if you specify &quot;stayfore&quot; in the stay attribute, the back page will move from the outside and come in, with the image of the front page staying in place.<br />
<br />
　The scroll transition when &quot;stayback&quot; is specified in the stay attribute is as follows.<br />
<br /><div class="descimg"><img width="320" height="64" alt="univtrans_Sstaysrc.png" src="univtrans_Sstaysrc.png" /><br />When stay=stayback</div><br />　In this case, the back page layer appears to be visible from behind the front page layer moving out.<br />
<br />
　When &quot;nostay&quot; is specified in the stay attribute, the result is as follows.<br />
<br /><div class="descimg"><img width="320" height="64" alt="univtrans_Snostay.png" src="univtrans_Snostay.png" /><br />stay=nostay</div><br />　In this way, the scrolling source image comes out as if pressed by the incoming switching source image. If you make the image of A and the image of B continuous horizontally or vertically, you can get the effect of scrolling a large screen. But it's not very suitable for the foreground layer transition effect.<code class="inlinecode">(^^;;</code><br />
</div></div>
<h1><a id="id300" name="id300">Front page and back page</a>
</h1><div class="para"><div>
　A very important part of the transition is the concept of <a id="id301" name="id301" class="targanchor"><dfn>front page</dfn></a> and <a id="id302" name="id302" class="targanchor"><dfn>back page</dfn></a>.<br />
　As mentioned in <a target="main" class="jump" href="DispBase.html">Let's show the background</a>, KAG has a front page that is normally visible and a back page that is not visible, except that both are visible or invisible. It has exactly the same configuration.<br />
　KAG transitions always take place in such a way that the contents of the back page are gradually displayed instead of the contents of the currently displayed front page. After the transition, the contents of the front page will be exactly the same as the contents of the back page.<br />
　So you have to manipulate the back page before the transition.<br />
<br />
　For example. Suppose that only the background layer is replaced.<br />
　First, before the transition, if the state of the layer is as follows (left is front, right is back)<br />
<br />
<br /><div class="descimg"><img width="240" height="180" alt="trans0f.jpg" src="trans0f.jpg" /><img width="240" height="180" alt="trans0b.jpg" src="trans0b.jpg" /><br />Before transition</div><br />　At this point, the front page shows the panorama layer and the message layer on the background layer. The back page can be in any state.<br />
　Here, the back page is made the same as the front page with the [backlay] tag.<br />
<br /><div class="descimg"><img width="240" height="180" alt="trans0f.jpg" src="trans0f.jpg" /><img width="240" height="180" alt="trans0f.jpg" src="trans0f.jpg" /><br />After executing the backlay tag</div><br />　Transitions transfer the contents of the back page to the front page, so you need to tweak the back page before performing the transition.<br />
　Here we want to replace only the background layer, so load the image into the background layer on the back page.<br />
<br /><div class="descimg"><img width="240" height="180" alt="trans0f.jpg" src="trans0f.jpg" /><img width="240" height="180" alt="trans2b.jpg" src="trans2b.jpg" /><br />After loading an image in the background layer of the back page</div><br />　Here you can finally make the transition with the trans tag. Apparently, the transition brings the back page image to the front page.<br />
　During a transition, the result is as follows (example of transition).<br />
<br /><div class="descimg"><img width="240" height="180" alt="trans3f.jpg" src="trans3f.jpg" /><img width="240" height="180" alt="trans2b.jpg" src="trans2b.jpg" /><br />In transition</div><br />　Transitions wait at the [wt] tag.<br />
　When the transition is over, the back and front pages will be the same, as shown below.<br />
<br /><div class="descimg"><img width="240" height="180" alt="trans2b.jpg" src="trans2b.jpg" /><img width="240" height="180" alt="trans2b.jpg" src="trans2b.jpg" /><br />After the transition</div><br /></div></div>
<h1><a id="id303" name="id303">Let's switch the background layer</a>
</h1><div class="para"><div>
　Use the <a id="id304" name="id304" class="targanchor"><dfn>trans</dfn></a> tag to make the transition.<br />
　Basically, for the transition, copy the layer information of all the front pages to the back page with the [<a id="id305" name="id305" class="targanchor"><dfn>backlay</dfn></a>] tag on the back page, and mess with the image tag etc. on the part you want to change on the back page And execute the transition with the trans tag. Then, the change applied to the back page is applied to the front page so that it replaces the current front page.<br />
<br />
　First, let's switch the background layer with a crossfade transition.<br />
<br />

<br />
<code class="bq">[image&nbsp;storage=&quot;bg0&quot;&nbsp;page=fore&nbsp;layer=base]<br />
[wait&nbsp;time=200]<br />
*start|Start<br />
[cm]<br />
Hello.&nbsp;Switch&nbsp;the&nbsp;background&nbsp;layer.[l][r]<br />
<em>[backlay]</em><br />
[image&nbsp;storage=&quot;bg1&quot;&nbsp;layer=base&nbsp;<em>page=back</em>]<br />
<em>[trans&nbsp;method=crossfade&nbsp;time=1500]</em><br />
<em>[wt]</em><br />
Did&nbsp;it&nbsp;switch?<br />
</code>
<br />

　First, the information of the layer on the front page is copied to the back page using the [backlay] tag.<br />
　Then, the image to be displayed next is loaded in the background layer of the back page.<br />
　At this point, the only difference between the back page and the front page is the background image.<br />
　Next, the transition is executed with the trans tag. Thus, if you specify <code class="inlinecode">method=crossfade</code> in the trans attribute, it will be a universal transition. In this example, the time is specified as 1.5 seconds. The time is specified in milliseconds, so specify <code class="inlinecode">time=1500</code>.<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　It is specified in milliseconds, but the accuracy is not as accurate as in milliseconds.</div><br />
<br />
　After that, the <a id="id306" name="id306" class="targanchor"><dfn>wt</dfn></a> tag waits for the end of the transition. <em>If you do not write the wt tag, KAG will go next without waiting for the transition</em>, so please do not forget the wt tag.<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　Not only transitions, but most of the tags in KAG's &quot;Time-consuming things&quot; have a separate tag to wait for completion instead of waiting for it to finish. This allows you to fade out the background music while transitioning.<br />
　Also <em>be sure to include the corresponding waiting tag.</em> Even when trying to wear different types of things (such as waiting for the end of a transition with a wait tag), it is necessary to write a corresponding &quot;wait&quot; tag.<br />
</div><br />
<br />
<br />
　Also, when using Universal Transition, it looks like the following.<br />

<br />
<code class="bq">[image&nbsp;storage=&quot;bg0&quot;&nbsp;page=fore&nbsp;layer=base]<br />
[wait&nbsp;time=200]<br />
*start|Start<br />
[cm]<br />
Hello.&nbsp;Switch&nbsp;the&nbsp;background&nbsp;layer.[l][r]<br />
<em>[backlay]</em><br />
[image&nbsp;storage=&quot;bg1&quot;&nbsp;layer=base&nbsp;<em>page=back</em>]<br />
<em>[trans&nbsp;method=universal&nbsp;rule=&quot;rule1&quot;&nbsp;vague=1&nbsp;time=1500]</em><br />
<em>[wt]</em><br />
Did&nbsp;it&nbsp;switch?<br />
</code>
<br />

<br />
　In this example, the transition is executed using the trans tag. Thus, if you specify <code class="inlinecode">method=universal</code> in the trans attribute, it will be a universal transition (even if you omit the method tag, it will be considered universal). In this example, the rule image is set to &quot;rule1&quot;, the time is 1.5 seconds, and the fuzzy region value is 1.<br />
<br />
　Also, let's say that this is a scroll transition, a transition from the right without sitting down...<br />
<br />

<br />
<code class="bq">[image&nbsp;storage=&quot;bg0&quot;&nbsp;page=fore&nbsp;layer=base]<br />
[wait&nbsp;time=200]<br />
*start|Start<br />
[cm]<br />
Hello.&nbsp;Switch&nbsp;the&nbsp;background&nbsp;layer.[l][r]<br />
[backlay]<br />
[image&nbsp;storage=&quot;bg1&quot;&nbsp;layer=base&nbsp;<em>page=back</em>]<br />
[trans&nbsp;<em>method=scroll&nbsp;from=right&nbsp;stay=nostay&nbsp;children=false</em>&nbsp;time=1500]<br />
[wt]<br />
Did&nbsp;it&nbsp;switch?<br />
</code>
<br />

　It becomes. Here, <code class="inlinecode">children=false</code> is specified because otherwise the <a id="id307" name="id307" class="targanchor"><dfn>child layer</dfn></a> will move with it. In KAG, the background layer is the parent and the foreground and message layers are children of the background layer.<br />
　You can also set <code class="inlinecode">children=true</code> if you want the child layers to scroll along.<br />
</div></div>
<h1><a id="id308" name="id308">Let's switch the foreground layer</a>
</h1><div class="para"><div>
　Use the trans tag to switch the foreground layer as well.<br />
<br />

<br />
<code class="bq">[image&nbsp;storage=&quot;bg0&quot;&nbsp;page=fore&nbsp;layer=base]<br />
[wait&nbsp;time=200]<br />
*start|Start<br />
[cm]<br />
Hello.&nbsp;Display&nbsp;the&nbsp;foreground&nbsp;layer&nbsp;using&nbsp;transitions.[l][r]<br />
[backlay]<br />
[image&nbsp;layer=0&nbsp;page=back&nbsp;storage=&quot;fg0&quot;&nbsp;visible=true]<br />
;&nbsp;At&nbsp;this&nbsp;point,&nbsp;the&nbsp;foreground&nbsp;layer&nbsp;0&nbsp;on&nbsp;the&nbsp;front&nbsp;page&nbsp;is&nbsp;invisible&nbsp;(since&nbsp;it&nbsp;is&nbsp;the&nbsp;default),<br />
;&nbsp;At&nbsp;this&nbsp;point,&nbsp;the&nbsp;foreground&nbsp;layer&nbsp;0&nbsp;on&nbsp;the&nbsp;back&nbsp;page&nbsp;is&nbsp;visible&nbsp;and&nbsp;holds&nbsp;the&nbsp;image,<br />
;&nbsp;All&nbsp;other&nbsp;back&nbsp;page&nbsp;layers&nbsp;are&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;front&nbsp;page&nbsp;due&nbsp;to&nbsp;the&nbsp;effect&nbsp;of&nbsp;the&nbsp;backlay&nbsp;tag.<br />
[trans&nbsp;method=crossfade&nbsp;time=1500][wt]<br />
Next,&nbsp;swap&nbsp;the&nbsp;foreground&nbsp;layers.[l][r]<br />
[backlay]<br />
[image&nbsp;layer=0&nbsp;page=back&nbsp;storage=&quot;fg1&quot;&nbsp;visible=true]<br />
;&nbsp;At&nbsp;this&nbsp;point,&nbsp;the&nbsp;foreground&nbsp;layer&nbsp;0&nbsp;on&nbsp;the&nbsp;back&nbsp;page&nbsp;has&nbsp;an&nbsp;image&nbsp;named&nbsp;fg1,<br />
;&nbsp;All&nbsp;other&nbsp;back&nbsp;page&nbsp;layers&nbsp;are&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;front&nbsp;page&nbsp;due&nbsp;to&nbsp;the&nbsp;effect&nbsp;of&nbsp;the&nbsp;backlay&nbsp;tag.<br />
[trans&nbsp;method=crossfade&nbsp;time=1500][wt]<br />
Then&nbsp;remove&nbsp;the&nbsp;foreground&nbsp;layer.[l][r]<br />
[backlay]<br />
[layopt&nbsp;layer=0&nbsp;page=back&nbsp;visible=false]<br />
;&nbsp;At&nbsp;this&nbsp;point,&nbsp;the&nbsp;foreground&nbsp;layer&nbsp;0&nbsp;on&nbsp;the&nbsp;back&nbsp;page&nbsp;is&nbsp;invisible,<br />
;&nbsp;All&nbsp;other&nbsp;back&nbsp;page&nbsp;layers&nbsp;are&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;front&nbsp;page&nbsp;due&nbsp;to&nbsp;the&nbsp;effect&nbsp;of&nbsp;the&nbsp;backlay&nbsp;tag.<br />
[trans&nbsp;method=crossfade&nbsp;time=1500][wt]<br />
</code>
<br />

　The above example shows the foreground layer, replaces it with another image, and then erases it.<br />
　First of all, to display it, first, all the information on the front page is copied to the back page using the backlay tag. After that, I want to display the foreground in the part I want to change, here the foreground layer, so I load the image in the foreground layer on the back page.<br />
　After that, we use the trans tag.<br />
<br />
　Next, the foreground layer is replaced, but after copying it to the back page with backlay, operate the part you want to change and make the transition with the trans tag.<br />
<br />
　Finally, the foreground layer is deleted, but after copying to the back page with backlay, the corresponding foreground layer is hidden. Hidden means that it is not visible (obviously) and disappears when you make the transition.<br />
<br />
　In this case, since visible=true is set for the layer on the back page, you may be worried that it will be displayed, but the back page (background layer and its child layer) is originally only hidden. There is no need to worry about it being displayed even if you specify visible = true.<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　As in the above example, if the layer attribute of the trans tag is omitted, it is assumed that base (background layer) is specified, and if the child attribute is omitted, true is specified (transition together with child layers). Makes sense.<br />
　When you want to display the foreground layer using transitions, when you want to swap, when you want to erase, and so on, the other transitions are to make transitions together with the background layer, including child layers. You can also apply individual transitions to the foreground and message layers, for example, layer=0, but this is not usually used.<br />
</div><br />
</div></div>
<h1><a id="id309" name="id309">Let's switch message layers</a>
</h1><div class="para"><div>
　The message layer can be switched in the same way.<br />
　In the case of message layer, display / hide can be operated by layopt tag, so the same operation can be performed.<br />
<br />
　For example, if you want to draw the message layer hidden, and then display it on the screen after the drawing is completed, use the following. After that, the message layer is hidden using transitions.<br />
<br />

<br />
<code class="bq">[layopt&nbsp;layer=message&nbsp;page=fore&nbsp;visible=false]<br />
;&nbsp;↑&nbsp;Initially&nbsp;hide&nbsp;the&nbsp;front&nbsp;page&nbsp;message&nbsp;layer<br />
[layopt&nbsp;layer=message&nbsp;page=back&nbsp;visible=true]<br />
;&nbsp;↑&nbsp;Display&nbsp;the&nbsp;message&nbsp;layer&nbsp;on&nbsp;the&nbsp;back&nbsp;page<br />
[wait&nbsp;time=200]<br />
*start|Start<br />
[cm]<br />
[current&nbsp;page=back]<br />
;&nbsp;↑&nbsp;The&nbsp;message&nbsp;layer&nbsp;to&nbsp;be&nbsp;operated&nbsp;is&nbsp;on&nbsp;the&nbsp;back&nbsp;page<br />
[delay&nbsp;speed=nowait]<br />
;&nbsp;↑&nbsp;No-weight&nbsp;character&nbsp;drawing&nbsp;speed<br />
In&nbsp;this&nbsp;way,&nbsp;you&nbsp;can&nbsp;display&nbsp;the&nbsp;message&nbsp;layer&nbsp;using&nbsp;transitions.[r]<br />
[delay&nbsp;speed=user]<br />
;&nbsp;↑&nbsp;Restore&nbsp;character&nbsp;drawing&nbsp;speed<br />
[trans&nbsp;method=universal&nbsp;rule=&quot;trans1&quot;&nbsp;vague=1&nbsp;time=1500][wt]<br />
;&nbsp;↑&nbsp;Universal&nbsp;transition<br />
[current&nbsp;page=fore]<br />
;&nbsp;↑&nbsp;Make&nbsp;the&nbsp;message&nbsp;layer&nbsp;of&nbsp;the&nbsp;operation&nbsp;target&nbsp;the&nbsp;thing&nbsp;of&nbsp;the&nbsp;front&nbsp;page&nbsp;just&nbsp;in&nbsp;case<br />
[l]<br />
;&nbsp;↑&nbsp;Wait&nbsp;for&nbsp;click<br />
[layopt&nbsp;layer=message&nbsp;page=back&nbsp;visible=false]<br />
;&nbsp;↑&nbsp;Hide&nbsp;the&nbsp;message&nbsp;layer&nbsp;on&nbsp;the&nbsp;back&nbsp;page<br />
[trans&nbsp;method=universal&nbsp;rule=&quot;trans1&quot;&nbsp;vague=1&nbsp;time=1500][wt]<br />
;&nbsp;↑&nbsp;Transition<br />
</code>
<br />

</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
