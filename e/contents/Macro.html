<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from Macro.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Use macros</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id114" name="id114">What is a macro</a>
</h1><div class="para"><div>
　Macros are meant to &quot;make multiple tags and sentences appear in a single tag.&quot;<br />
<br />
　This is a way to freely define new tags by combining existing tags and sentences.<br />
　In KAG, you may have to specify the same tag many times, but using macro functions can greatly reduce such work.<br />
　Let's make it easy to macroize the sequence of tags.<code class="inlinecode">(^^)</code><br />
</div></div>
<h1><a id="id115" name="id115">Basic usage</a>
</h1><div class="para"><div>
　To use a macro, you must first &quot;define&quot; it. You only need to define a macro once, and then use it any number of times. Therefore, when defining a macro, it is better to write it at the beginning of first.ks.<br />
<br />
　When defining a macro, enclose the part you want to be a macro with the <a id="id116" name="id116" class="targanchor"><dfn>macro</dfn></a> and <a id="id117" name="id117" class="targanchor"><dfn>endmacro</dfn></a> tags. Specify the macro name in the attribute name of the macro tag.<br />
<br />

<br />
<code class="bq">[wait&nbsp;time=200]<br />
*start|Start<br />
[cm]<br />
;&nbsp;--&nbsp;Macro&nbsp;definition&nbsp;--<br />
<em>[macro&nbsp;name=newtag]</em>[font&nbsp;color=0xff0000]Make&nbsp;a&nbsp;macro&nbsp;like&nbsp;this[resetfont]<em>[endmacro]</em><br />
</code>
<br />

<br />
If you want to use this, use the macro name exactly as you would write a tag.<br />

<br />
<code class="bq">;&nbsp;--&nbsp;Using&nbsp;macros&nbsp;--<br />
[newtag]<br />
</code>
<br />

<br />
　When this is executed, the tag <code class="inlinecode">[newtag]</code> will be replaced with <code class="inlinecode">[font color=0xff0000]Make a macro like this[resetfont]</code> at <code class="inlinecode">[newtag]</code>, so the red text &quot;Make a macro like this&quot;<br />
<br />
　It can be written on multiple lines.<br />
<br />

<br />
<code class="bq">[wait&nbsp;time=200]<br />
*start|Start<br />
[cm]<br />
;&nbsp;--&nbsp;Macro&nbsp;definition&nbsp;--<br />
[macro&nbsp;name=newtag]<br />
[font&nbsp;color=0xff0000]<br />
Make&nbsp;a&nbsp;macro&nbsp;like&nbsp;this<br />
[resetfont]<br />
[endmacro]<br />
</code>
<br />


<br />
<code class="bq">;&nbsp;--&nbsp;Using&nbsp;macros&nbsp;--<br />
[newtag]<br />
</code>
<br />

</div></div>
<h1><a id="id118" name="id118">Macro attributes</a>
</h1><div class="para"><div>
　You can give an attribute to a macro and replace that attribute in the macro.<br />
　If you specify an attribute value starting with <a id="id119" name="id119" class="targanchor"><dfn>%</dfn></a> in a macro, it will be replaced with the attribute given to the macro.<br />
　See the example below.<br />

<br />
<code class="bq">[wait&nbsp;time=200]<br />
*start|Start<br />
[cm]<br />
;&nbsp;--&nbsp;Macro&nbsp;definition&nbsp;--<br />
[macro&nbsp;name=newtag]<br />
[font&nbsp;color=<em>%iro</em>]<br />
Make&nbsp;a&nbsp;macro&nbsp;like&nbsp;this<br />
[resetfont]<br />
[endmacro]<br />
</code>
<br />


<br />
<code class="bq">;&nbsp;--&nbsp;Using&nbsp;macros&nbsp;--<br />
[newtag&nbsp;<em>iro=0x00ff00</em>]<br />
</code>
<br />

<br />
　In this example, we give the attribute iro and replace it with the color attribute of the font tag by entity.<br />
　When executed, you should see &quot;Make a macro like this&quot; in green text.<br />
<br />
<br />
　Also, if you specify <a id="id120" name="id120" class="targanchor"><dfn>*</dfn></a> as the attribute of the tag in the macro, you can pass all the attributes passed to the macro. For example, if you want to create a macro with a trans tag followed by a wt tag,<br />
<br />

<br />
<code class="bq">[macro&nbsp;name=transwait][trans&nbsp;<em>*</em>][wt][endmacro]<br />
</code>
<br />

<br />
　You can write In this way, for example, when using the transwait macro, the attributes specified for the transwait macro are passed exactly to the trans tag, which is useful when creating a macro with a hairy level on the existing tag.<br />
<br />
　Macros that were in the macro will be expanded again, so be careful not to write your own macro in the macro (^^)<br />
<br />
　If you want to specify a default value when the value is omitted, write <a id="id121" name="id121" class="targanchor"><dfn>|</dfn></a> (vertical bar) in the attribute with %, and then specify the value when omitted. See the example below.<br />
<br />

<br />
<code class="bq">[wait&nbsp;time=200]<br />
*start|Start<br />
[cm]<br />
;&nbsp;--&nbsp;Macro&nbsp;definition&nbsp;--<br />
[macro&nbsp;name=newtag]<br />
[font&nbsp;color=%color<em>|0xff0000</em>]<br />
Make&nbsp;a&nbsp;macro&nbsp;like&nbsp;this<br />
[resetfont]<br />
[endmacro]<br />
</code>
<br />


<br />
<code class="bq">;&nbsp;--&nbsp;Using&nbsp;macros&nbsp;--<br />
[newtag&nbsp;color=0x00ff00]<br />
[newtag]<br />
</code>
<br />

　Where the first [newtag] is used, the color attribute is specified, so it is replaced with the value of that attribute, 0x00ff00, and the characters are displayed in green.<br />
　Where the second [newtag] is used, no attributes are specified, so the default &quot;0xff0000&quot; is used and the text is displayed in red.<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　Use single-byte lower case letters to specify attribute names. If you specify an uppercase letter, it will not work properly.</div><br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
