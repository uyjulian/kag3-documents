<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from RClick.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>About right click subroutine</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id176" name="id176">Right-click subroutine</a>
</h1><div class="para"><div>
　A KAG subroutine called by a right mouse click.<br />
　Used to display the save / load screen by right-clicking.<br />
</div></div>
<h1><a id="id177" name="id177">Anyway, for example</a>
</h1><div class="para"><div>
　Use the rclick tag to create a right-click subroutine. This tag allows you to specify whether to call the specified subroutine when right-clicked, or to jump to the specified label.<br />
<br />
　For example, suppose you wrote the following to rclick.ks:<br />

<br />
<code class="bq"><span class="weak">例:</span><br />*rclick<br />
@rclick&nbsp;jump=true&nbsp;storage=&quot;rclick.ks&quot;&nbsp;target=&quot;*exit&quot;&nbsp;enabled=true<br />
@current&nbsp;layer=message1<br />
@layopt&nbsp;layer=message0&nbsp;page=fore&nbsp;visible=false<br />
@layopt&nbsp;layer=message1&nbsp;page=fore&nbsp;visible=true<br />
@er<br />
This&nbsp;is&nbsp;inside&nbsp;the&nbsp;right&nbsp;click&nbsp;routine.<br />
[s]<br />
<br />
*exit<br />
@layopt&nbsp;layer=message1&nbsp;page=fore&nbsp;visible=false<br />
@layopt&nbsp;layer=message0&nbsp;page=fore&nbsp;visible=true<br />
@current&nbsp;layer=message0<br />
@rclick&nbsp;call=true&nbsp;storage=&quot;rclick.ks&quot;&nbsp;target=&quot;*rclick&quot;&nbsp;enabled=true<br />
@return<br />
</code>
<br />

　So, for example, first.ks would contain the following line:
<br />
<code class="bq">@rclick&nbsp;call=true&nbsp;storage=&quot;rclick.ks&quot;&nbsp;target=&quot;*rclick&quot;&nbsp;enabled=true<br />
</code>
<br />

<br />
　Then right click will call *rclick in rclick.ks.<br />
　In the above example, rclick.ks is set to jump to *exit when right-clicked first. This allows you to go back by right-clicking in the right-click subroutine.<br />
　Hiding message layer 0. This makes it impossible to select an option even if some options are displayed on message layer 0.<br />
　Display message layer 1 and display &quot;This is in the right click routine.&quot; And stop there.<br />
</div></div>
<h1><a id="id178" name="id178">Difficult example</a>
</h1><div class="para"><div>
　The right-click subroutine is a complicated example, but it allows you to view the message history and save / load.
<br />
<code class="bq"><span class="weak">例:</span><br />*sub1<br />
@tempsave<br />
;&nbsp;↑Save&nbsp;state&nbsp;temporarily<br />
@history&nbsp;output=false<br />
;&nbsp;↑Disable&nbsp;output&nbsp;to&nbsp;message&nbsp;history<br />
@mapdisable&nbsp;layer=0&nbsp;page=fore<br />
;&nbsp;↑If&nbsp;you&nbsp;are&nbsp;using&nbsp;a&nbsp;clickable&nbsp;map,&nbsp;disable&nbsp;it&nbsp;this&nbsp;way<br />
@backlay<br />
@layopt&nbsp;layer=message1&nbsp;page=back&nbsp;visible=true<br />
;&nbsp;↑Use&nbsp;message&nbsp;layer&nbsp;1&nbsp;in&nbsp;this&nbsp;subroutine<br />
@layopt&nbsp;layer=message0&nbsp;page=back&nbsp;visible=false<br />
@current&nbsp;layer=message1&nbsp;page=back<br />
@position&nbsp;left=0&nbsp;top=0&nbsp;width=640&nbsp;height=480<br />
@eval&nbsp;exp=&quot;f.r_first=true&quot;<br />
;&nbsp;↑Only&nbsp;perform&nbsp;transitions&nbsp;when&nbsp;entering&nbsp;this&nbsp;routine<br />
;<br />
*menu<br />
@er<br />
@nowait<br />
[link&nbsp;target=*hide]Dismiss&nbsp;message[endlink][r]<br />
[link&nbsp;target=*history]View&nbsp;message&nbsp;history[endlink][r]<br />
[link&nbsp;target=*load]Follow&nbsp;the&nbsp;bookmark[endlink][r]<br />
[link&nbsp;target=*save]Insert&nbsp;a&nbsp;bookmark[endlink][r]<br />
[link&nbsp;target=*gotostart]Return&nbsp;to&nbsp;the&nbsp;beginning[endlink][r]<br />
[link&nbsp;target=*ret]Return[endlink][r]<br />
@endnowait<br />
@current&nbsp;layer=message1&nbsp;page=fore<br />
@if&nbsp;exp=&quot;f.r_first&quot;<br />
@trans&nbsp;time=500&nbsp;rule=trans1&nbsp;vague=128<br />
@wt<br />
@endif<br />
@eval&nbsp;exp=&quot;f.r_first=false&quot;<br />
@s<br />
<br />
*ret<br />
;&nbsp;Return&nbsp;from&nbsp;subroutine<br />
@tempload&nbsp;bgm=false&nbsp;se=false&nbsp;backlay=true<br />
@trans&nbsp;time=500&nbsp;rule=trans1&nbsp;vague=128<br />
@wt<br />
@return<br />
<br />
*hide<br />
;&nbsp;Dismiss&nbsp;message<br />
@hidemessage<br />
@jump&nbsp;target=*menu<br />
<br />
*history<br />
;&nbsp;View&nbsp;message&nbsp;history<br />
@showhistory<br />
@jump&nbsp;target=*menu<br />
<br />
*load<br />
;&nbsp;Follow&nbsp;the&nbsp;bookmark<br />
;&nbsp;emb&nbsp;exp=&nbsp;...&nbsp;See&nbsp;<a target="main" class="jump" href="TJSTips.html">To use TJS more</a>&nbsp;for&nbsp;more&nbsp;information<br />
@er<br />
@nowait<br />
[link&nbsp;target=*lt0][emb&nbsp;exp=&quot;kag.getBookMarkPageName(0)&quot;][endlink][r]<br />
[link&nbsp;target=*lt1][emb&nbsp;exp=&quot;kag.getBookMarkPageName(1)&quot;][endlink][r]<br />
[link&nbsp;target=*lt2][emb&nbsp;exp=&quot;kag.getBookMarkPageName(2)&quot;][endlink][r]<br />
[link&nbsp;target=*lt3][emb&nbsp;exp=&quot;kag.getBookMarkPageName(3)&quot;][endlink][r]<br />
[link&nbsp;target=*lt4][emb&nbsp;exp=&quot;kag.getBookMarkPageName(4)&quot;][endlink][r]<br />
[link&nbsp;target=*menu]Return[endlink][r]<br />
@endnowait<br />
@s<br />
<br />
*lt0<br />
@load&nbsp;place=0&nbsp;ask=true<br />
@jump&nbsp;target=*menu<br />
*lt1<br />
@load&nbsp;place=1&nbsp;ask=true<br />
@jump&nbsp;target=*menu<br />
*lt2<br />
@load&nbsp;place=2&nbsp;ask=true<br />
@jump&nbsp;target=*menu<br />
*lt3<br />
@load&nbsp;place=3&nbsp;ask=true<br />
@jump&nbsp;target=*menu<br />
*lt4<br />
@load&nbsp;place=4&nbsp;ask=true<br />
@jump&nbsp;target=*menu<br />
<br />
*save<br />
;&nbsp;Insert&nbsp;a&nbsp;bookmark<br />
;&nbsp;emb&nbsp;exp=&nbsp;...&nbsp;See&nbsp;<a target="main" class="jump" href="TJSTips.html">To use TJS more</a>&nbsp;for&nbsp;more&nbsp;information<br />
@er<br />
@nowait<br />
[link&nbsp;target=*st0][emb&nbsp;exp=&quot;kag.getBookMarkPageName(0)&quot;][endlink][r]<br />
[link&nbsp;target=*st1][emb&nbsp;exp=&quot;kag.getBookMarkPageName(1)&quot;][endlink][r]<br />
[link&nbsp;target=*st2][emb&nbsp;exp=&quot;kag.getBookMarkPageName(2)&quot;][endlink][r]<br />
[link&nbsp;target=*st3][emb&nbsp;exp=&quot;kag.getBookMarkPageName(3)&quot;][endlink][r]<br />
[link&nbsp;target=*st4][emb&nbsp;exp=&quot;kag.getBookMarkPageName(4)&quot;][endlink][r]<br />
[link&nbsp;target=*menu]Return[endlink][r]<br />
@endnowait<br />
@s<br />
<br />
*st0<br />
@save&nbsp;place=0&nbsp;ask=true<br />
@jump&nbsp;target=*menu<br />
*st1<br />
@save&nbsp;place=1&nbsp;ask=true<br />
@jump&nbsp;target=*menu<br />
*st2<br />
@save&nbsp;place=2&nbsp;ask=true<br />
@jump&nbsp;target=*menu<br />
*st3<br />
@save&nbsp;place=3&nbsp;ask=true<br />
@jump&nbsp;target=*menu<br />
*st4<br />
@save&nbsp;place=4&nbsp;ask=true<br />
@jump&nbsp;target=*menu<br />
<br />
<br />
*gotostart<br />
;&nbsp;&quot;Return&nbsp;to&nbsp;the&nbsp;beginning&quot;<br />
@gotostart&nbsp;ask=true<br />
@jump&nbsp;target=*menu<br />
</code>
<br />

<br />
　In addition, please note the locksnapshot and unlocksnapshot tags when saving thumbnail images in bookmark data.<br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
