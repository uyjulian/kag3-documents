<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from Var.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Use variables</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id310" name="id310">What is a variable?</a>
</h1><div class="para"><div>
<br />
　Variables in KAG are<br />
<br />
・ Things to remember something<br />
<br />
　It's just<br />
<br />
　However, KAG is a system based on the scripting language <a id="id311" name="id311" class="targanchor"><dfn>TJS2</dfn></a>, and the variables in KAG are TJS2 variables themselves, so they have quite powerful functions.<br />
<br />
　Since this is a tutorial, only the basic usage will be described. However, if you access the methods and properties inside KAG or use the Kirikiri features directly, it is almost <em>bog</em> state, Be careful of those who are easily fit (laughs).<br />
</div></div>
<h1><a id="id312" name="id312">Variable type</a>
</h1><div class="para"><div>
　There are three types of variables in KAG. Normal &quot;<a id="id313" name="id313" class="targanchor"><dfn>game variables</dfn></a>&quot; that are saved and loaded along with saving and loading of bookmarks, and &quot;<a id="id314" name="id314" class="targanchor"><dfn>system variables</dfn></a>&quot; that can always hold values regardless of bookmarking saving and loading, and &quot;<a id="id315" name="id315" class="targanchor"><dfn>temporary variable</dfn></a>&quot; to temporarily store a value. &quot;System variable&quot; retains the value if you exit Kirikiri / KAG and start the same game again. &quot;Temporary variable&quot; loses its contents when quitting Kirikiri, and the value is not saved in bookmark.<br />
<br />
　Game variables are named <a id="id316" name="id316" class="targanchor"><dfn>f</dfn></a>, system variables are named <a id="id317" name="id317" class="targanchor"><dfn>sf</dfn></a>, and temporary variables are named <a id="id318" name="id318" class="targanchor"><dfn>tf</dfn></a>.<br />
<br />
　In addition, a variable in KAG (or TJS2) can be a string or a number (the type of thing that is contained in a variable, such as a string or a number, is called a &quot;<a id="id319" name="id319" class="targanchor"><dfn>type</dfn></a>&quot; ). Variables can be (almost) free lying, there is no limit to the number of variables, and there is no limit to the length of the string. Numbers can also handle real numbers.<br />
　Starting with KAG 3.x, &quot;arrays&quot; and &quot;dictionary arrays&quot; can be handled (not described here).<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　The integer type of TJS2 has a precision of 64 bits, and the real type has a precision of double (double precision).<br />
　Strings handle zero-terminated UNICODE strings and have no length restrictions.<br />
</div><br />
</div></div>
<h1><a id="id320" name="id320">Names that can be used as variables</a>
</h1><div class="para"><div>
　In Kirikiri / KAG, variables can be almost freely named. However, there is a rule about the names of variables that can be used by Kirikiri / KAG even though they are free.<br />
<br />
<dl>
<dt>You can use half-width alphanumeric and full-width characters and _ (under bar) in variable names</dt>
<dd>　Variable names such as <em><code class="inlinecode">abc&amp;def</code></em> or <em><code class="inlinecode">a-z</code></em> are not allowed.<br />
　You can include underscores like <em><code class="inlinecode">final_count</code></em> or use double-byte characters like <em><code class="inlinecode">主人公の名前</code></em> (All double-byte symbols can be used.)</dd>
<dt>However, a single-byte number cannot come at the beginning of the variable name</dt>
<dd>　Variable names such as <em><code class="inlinecode">2friends</code></em> and <em><code class="inlinecode">3com</code></em> cannot be used. (It is OK if the double-byte number comes at the beginning.)</dd></dl><br />
　Prefix these variables with <em><code class="inlinecode">f.</code></em> for game variables and <em><code class="inlinecode">sf.</code></em> for system variables, and <em><code class="inlinecode">tf.</code></em> for temporary variables.<br />
　For example, the following variable names are possible:<br />
<br />
<code class="inlinecode"> <em>f.flag1  sf.username  sf.playcount  tf.i  f.enokazu  f.variable_1 </em>...</code><br />
<br />
　Also, the variables that are used for the first time are all in a special state: 0 as a numeric value, and '' (an empty string) as a character string. In general, use variables after putting them in first.<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　You may see <em>kag</em> in addition to <em>f</em>, <em>sf</em>, and <em>tf</em>, but <em>kag</em> is used to directly access the inside of the KAG system.<br />
</div><br />
</div></div>
<h1><a id="id321" name="id321">Assignment to variables</a>
</h1><div class="para"><div>
　Then, to assign a value to a variable, you typically use the <a id="id322" name="id322" class="targanchor"><dfn>eval</dfn></a> tag. For example, if you want to substitute 1000 for <code class="inlinecode">f.flag1</code>...<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;<em>f.flag1&nbsp;<a id="id323" name="id323" class="targanchor"><dfn>=</dfn></a>&nbsp;1000</em>&quot;]<br />
</code>
<br />

　will do. That is, write = after the variable name, followed by the number you want to assign.<br />
<br />
　If you want to substitute a string,<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;<em>f.variable_1&nbsp;=&nbsp;'String</em>&quot;]<br />
</code>
<br />

　will do. That is, the string enclosed in '' after the = (note single and double quotes).<br />
　There is no such thing as a variable for a string or a variable for a number that changes its name depending on the type of what is put in the variable. It becomes the type of what you put.<br />
<br />
　If you want to copy the contents to another variable,<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;<em>f.flag1&nbsp;=&nbsp;f.flag2</em>&quot;]<br />
</code>
<br />

<br />
Like so.<br />
</div></div>
<h1><a id="id324" name="id324">Operations on variables</a>
</h1><div class="para"><div>
<br />
　If you want to calculate<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;<em>f.flag1&nbsp;=&nbsp;f.flag1&nbsp;+&nbsp;1</em>&quot;]<br />
</code>
<br />

　And so on. In this example, f.flag1 plus 1 is assigned to f.flag1 (that is, 1 is added to f.flag1).<br />
　In the exp attribute, write &quot;<a id="id325" name="id325" class="targanchor"><dfn>expression</dfn></a>&quot; in TJS2.<br />
　Expressions include <a id="id326" name="id326" class="targanchor"><dfn>*</dfn></a> (multiplication) <a id="id327" name="id327" class="targanchor"><dfn>/</dfn></a> (division) <a id="id328" name="id328" class="targanchor"><dfn>+</dfn></a> (addition) <a id="id329" name="id329" class="targanchor"><dfn>-</dfn></a> (subtraction) The normal <a id="id330" name="id330" class="targanchor"><dfn>operator</dfn></a> can be used normally (it has precedence like a mathematical expression). () Parentheses can be used normally.<br />
　For example,<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;<em>f.flag1&nbsp;=&nbsp;f.flag1&nbsp;+&nbsp;f.flag2&nbsp;*&nbsp;f.flag3</em>&quot;]<br />
</code>
<br />

　then, f.flag1 is the result of multiplying f.flag2 and f.flag3 and adding f.flag1.<br />
<br />
　Use / (slash) to divide.<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;<em>f.flag1&nbsp;=&nbsp;f.flag2&nbsp;/&nbsp;f.flag3</em>&quot;]<br />
</code>
<br />

　In this case, f.flag2 is divided by f.flag3 and the result is f.flag1.<br />
　However, if it is not divisible, f.flag1 will be a real number, so if you want to round down and get an integer result, use the integer division operator \<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;<em>f.flag1&nbsp;=&nbsp;f.flag2&nbsp;\&nbsp;f.flag3</em>&quot;]<br />
</code>
<br />

　Is written.<br />
<br />
<br />
　Also, use the + operator to join strings.<br />
<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;f.flag2&nbsp;=&nbsp;'hoge'&quot;]<br />
[eval&nbsp;exp=&quot;f.flag3&nbsp;=&nbsp;'une'&quot;]<br />
[eval&nbsp;exp=&quot;<em>f.flag1=&nbsp;f.flag2&nbsp;+&nbsp;f.flag3</em>&quot;]<br />
</code>
<br />

　In the above example, f.flag1 contains the string 'hogeune'.<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　The grammar of TJS2 is very similar to (not exactly the same as) it was created with reference to JavaScript (ECMAScript).<br />
　The behavior of normal arithmetic operations is almost the same. The handling of strings and the mixed operation of strings and numbers are almost the same.<br />
</div><br />
</div></div>
<h1><a id="id331" name="id331">Strings and numbers</a>
</h1><div class="para"><div>
　Variables in KAG are not divided into variables, such as variables for strings and variables for numbers, and their names do not change.<br />
　If you put a string, the variable will be a string, if you put a number, the variable will be a variable with a number.<br />
　The trouble is when you mix and use these. The + operator has various meanings and uses (^^;<br />
<br />
　The + operator is used to join strings and the + operator is used to add numbers, but when trying to add a string and a number, if either one is a string, one of the numbers is There is a rule that they are converted to strings and joined.<br />
<br />
　For example, if f.flag2 contains the string 'hoge' and f.flag3 contains the number 10,<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;<em>f.flag1&nbsp;=&nbsp;f.flag2&nbsp;+&nbsp;f.flag2</em>&quot;]<br />
</code>
<br />

　So, f.flag1 will contain the string 'hoge10'.<br />
<br />
　Also, you may want to convert a string to a number. For example, if you want to treat what you enter in the [input] tag as a number, you also use the + operator in this case. Use the + operator in front of the variable you want to be a number. For example, if f.flag1 contains the string '20',<br />
<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;<em>f.flag1&nbsp;=&nbsp;+f.flag1</em>&quot;]<br />
</code>
<br />

<br />
　Would convert the contents of f.flag1 into a number and re-enter f.flag1. f.flag1 is the number 20.<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　Care must be taken when the + operator follows. When writing an expression such as adding f.flag3 to f.flag2 with f.flag3 as a numeric value, it is an error to write <code class="inlinecode">f.flag2 ++ f.flag3</code> (another operator called ++ Because there is). Write <code class="inlinecode">f.flag2 + + f.flag3</code> with a space.<br />
</div><br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　The unary + operator (+ for <code class="inlinecode">f.flag1 = + f.flag1</code> in the example above) will return a result if the string contains decimal notation (such as 0.3) It is a real number. If you want to get only integers (if you want to truncate the decimal point), you can write int +. For example, in the above example, <code class="inlinecode">f.flag1 = int + f.flag1</code>.<br />
</div><br />
</div></div>
<h1><a id="id332" name="id332">Variable deletion, etc.</a>
</h1><div class="para"><div>
　Use <a id="id333" name="id333" class="targanchor"><dfn>delete</dfn></a> to delete a variable. You can delete the variable with <em>delete variable_name</em>.<br />
　For example, if you want to delete <code class="inlinecode">f.flag1</code>:<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;<em>delete&nbsp;f.flag1</em>&quot;]<br />
</code>
<br />

　will do.<br />
<br />
　Also, the <a id="id334" name="id334" class="targanchor"><dfn>clearvar</dfn></a> tag removes all game variables.<br />
<br />
　In addition, you can use all the operators available in TJS2 and calculations such as trigonometric functions using math objects (I don't know if you need them). Please refer to TJS2 Help of Kirikiri SDK for details.<br />
<br />
　Multiple expressions can be written in one eval tag using <a id="id335" name="id335" class="targanchor"><dfn>,</dfn></a> (comma).<br />
For example,<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;f.first=true&quot;]<br />
[eval&nbsp;exp=&quot;f.flag0=0&quot;]<br />
[eval&nbsp;exp=&quot;f.flag1=0&quot;]<br />
</code>
<br />

　Such an expression can be succinctly written as follows:<br />

<br />
<code class="bq">[eval&nbsp;exp=&quot;f.first=true<em>,</em>&nbsp;f.flag0=0<em>,</em>&nbsp;f.flag1=0&quot;]<br />
</code>
<br />

<br />
　Also, if you use <a id="id336" name="id336" class="targanchor"><dfn>iscript</dfn></a> tag, you can write a series of eval tags concisely.<br />
<br />
　For example, the above expression:<br />
<br />

<br />
<code class="bq">[iscript]<br />
f.first=true<em>;</em><br />
f.flag0=0<em>;</em><br />
f.flag1=0<em>;</em><br />
[endscript]<br />
</code>
<br />

<br />
　You can write Remember; (semicolon) after each expression.<br />
　Thus, using, (comma) or iscript is much faster than not using it.<br />
</div></div>
<h1><a id="id337" name="id337">Display the contents of a variable</a>
</h1><div class="para"><div>
　If you want to display the contents of a variable in a scenario, use the <a id="id338" name="id338" class="targanchor"><dfn>emb</dfn></a> tag.<br />
　For example:<br />

<br />
<code class="bq">[wait&nbsp;time=200]<br />
*start<br />
[cm]<br />
[eval&nbsp;exp=&quot;f.number=200&quot;][eval&nbsp;exp=&quot;f.mojiretu='String'&quot;]<br />
Contents&nbsp;of&nbsp;f.number:&nbsp;[emb&nbsp;exp=&quot;f.number&quot;][l][r]<br />
Contents&nbsp;of&nbsp;f.mojiretu:&nbsp;[emb&nbsp;exp=&quot;f.mojiretu&quot;][l][r]<br />
</code>
<br />

<br />
　When executed,<br />
<br />
Contents of f.number: 200<br />
Contents of f.mojiretu: String<br />
<br />
　should be displayed.<br />
</div></div>
<h1><a id="id339" name="id339">entity</a>
</h1><div class="para"><div>
　An entity is the ability to replace the value of an attribute of another tag with the contents of a variable.<br />
　For the attribute value, write <a id="id340" name="id340" class="targanchor"><dfn>&amp;</dfn></a> followed by the variable name.<br />

<br />
<code class="bq">[wait&nbsp;time=200]<br />
*start<br />
[cm]<br />
[eval&nbsp;exp=&quot;f.fontsize=60&quot;]<br />
[font&nbsp;size=&quot;&amp;f.fontsize&quot;]Size&nbsp;60&nbsp;characters[resetfont]<br />
</code>
<br />

<br />
　In this case, the value of 60 assigned to f.fontsize replaces the value of the size attribute of the font tag.<br />
<br />
　In fact, the entity is a function that executes the contents of the attribute value written after &amp; as a TJS2 expression and replaces the attribute value with the result. Therefore, you can write a TJS2 expression after &amp;.<br />
</div></div>

<h1><a id="id341" name="id341">Determining conditions</a>
</h1><div class="para"><div>
　You can use the following operators to determine whether a variable is equal to a value.<br />

<br />
<code class="bq">a<a id="id342" name="id342" class="targanchor"><dfn>==</dfn></a>b&nbsp;&nbsp;&nbsp;&nbsp;true&nbsp;if&nbsp;a&nbsp;is&nbsp;equal&nbsp;to&nbsp;b<br />
a<a id="id343" name="id343" class="targanchor"><dfn>!=</dfn></a>b&nbsp;&nbsp;&nbsp;&nbsp;true&nbsp;if&nbsp;a&nbsp;is&nbsp;not&nbsp;equal&nbsp;to&nbsp;b<br />
a<a id="id344" name="id344" class="targanchor"><dfn>&lt;</dfn></a>b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true&nbsp;if&nbsp;a&nbsp;is&nbsp;less&nbsp;than&nbsp;b<br />
a<a id="id345" name="id345" class="targanchor"><dfn>&gt;</dfn></a>b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true&nbsp;if&nbsp;a&nbsp;is&nbsp;greater&nbsp;than&nbsp;b<br />
</code>
<br />

<br />
　You can also use &gt;= and &lt;= (same or greater, same or less).<br />
　Such conditional judgment is mainly used in the if tag.<br />
<br />
　The <a id="id346" name="id346" class="targanchor"><dfn>if</dfn></a> tag executes the text or tag up to the endif tag only when the expression specified by exp indicates true.<br />
<br />

<br />
<code class="bq">[if&nbsp;exp=&quot;f.flag1<em>==</em>2&quot;]f.flag1&nbsp;is&nbsp;2[endif]<br />
[if&nbsp;exp=&quot;f.flag1<em>!=</em>2&quot;]f.flag1&nbsp;is&nbsp;not&nbsp;2[endif]<br />
</code>
<br />

<br />
　Variables can be very powerful depending on how you use them.<br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
