<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from ReadUnread.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>About unread / read processing</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id179" name="id179">Unread / read processing</a>
</h1><div class="para"><div>
　Unread means that the user has not read the scenario yet, and read means that the user has read it.<br />
　KAG can change the display speed of messages between unread and read parts, and can disable [l] tags for read parts.<br />
<br />
　Unread / read records are recorded in system variables starting with <code class="inlinecode">trail_</code>. <code class="inlinecode">AutoRecordPageShowing</code> in <code class="inlinecode">Config.tjs</code> must be set to true to record unread / read.<br />
</div></div>
<h1><a id="id180" name="id180">Unread and read parts</a>
</h1><div class="para"><div>
　In KAG, unread / read parts are separated by labels.<br />
　It is recorded in the system variable <code class="inlinecode">trail_scenario file name_label</code>. For example, the label *start in first.ks would be the variable name <code class="inlinecode">sf.trail_first_start</code>.<br />
　If this variable is void (ie undefined; it will be considered 0 when comparing to a number), it is unread if it is 1 or greater. In the case of 1 or more, it is the number of times that part was read.<br />
<br />
　Basically, from one label to the next label or [s] tag is treated as one &quot;part&quot;.<br />
　For example, if you have the following scenario, each part is a scenario that is color-coded with each color.<br />
<br />
<table width="100%">

<tr><td bgcolor="#ffc0c0"><span class="script">

*part_1<br />

@cm<br />

Here is part one.[l][r]<br />

Usually, up to the next label is one "part".[p][r]<br />

</span></td></tr>

<tr><td bgcolor="#c0ffc0"><span class="script">

*part_2<br />

@cm<br />

Here is part two.[p][r]<br />

</span></td></tr>

<tr><td bgcolor="#c0c0ff"><span class="script">

*part_3<br />

@cm<br />

Here is part three.[l][r]<br />

[[s]Even a tag is one "part".[s]<br />

</span></td></tr>

</table>
<br />
　Unread and read are processed in units of this &quot;part&quot;.<br />
<br />
　By default, all parts are unread.<br />
</div></div>
<h1><a id="id181" name="id181">Read judgment</a>
</h1><div class="para"><div>
　There are conditions for these &quot;parts&quot; to be considered read. As a general rule, when &quot;the next label is reached or the [s] tag is reached,&quot; the &quot;part&quot; is considered to be read and recorded in a system variable.<br />
　In other words, if the user quits the program in the middle of the &quot;part&quot; or stops reading, it will not be considered as read. You have to read that &quot;part&quot; until the end.<br />
</div></div>
<h1><a id="id182" name="id182">Scenario control and read determination</a>
</h1><div class="para"><div>
　If there is a link or jump tag in the middle and the scenario branches, the processing changes slightly.<br />
<br />
<dl>
<dt>When jumping by link type (link or button tag)</dt>
<dd>　If these tags allow the user to make a choice and jump to another part of the scenario, they will be automatically read.<br />
　For example, in the following example:<br />

<br />
<code class="bq">*select<br />
This&nbsp;part&nbsp;will&nbsp;be&nbsp;read&nbsp;when&nbsp;the&nbsp;user&nbsp;selects&nbsp;an&nbsp;option.[r]<br />
[link&nbsp;target=*t1]Option&nbsp;1[endlink][r]<br />
[link&nbsp;target=*t2]Option&nbsp;2[endlink][r]<br />
@wait&nbsp;time=3000<br />
@jump&nbsp;target=*timeout<br />
</code>
<br />

　If an option is selected before the timeout in the @wait tag, it will be read at that point. By the way, in the usual way of using alternatives, when you finish displaying the selection with the link tag, I think that the [s] tag will come, so it will be read at that point.<br />
　The link tag and button tag have an attribute called contpage. If this is set to false, jumping at that point will not be read.<br />
</dd>
<dt>jump tag</dt>
<dd>　If you jump using the jump tag, it will be read at that point. In this case, there is also an attribute called coutpage, and if it is set to false, it will not be read.<br />
</dd>
<dt>call and return</dt>
<dd>　When calling a subroutine with the call tag, it will not be read. Again, there is an attribute called coutpage, which is marked as read if set to true.<br />
　The retrun tag is read at that point (not the caller but the part of the subroutine where the return tag is read). In this case, there is also an attribute called coutpage, and if it is set to false, it will not be read.<br />
</dd></dl></div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
