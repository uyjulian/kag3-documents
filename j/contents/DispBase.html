<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from DispBase.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>背景を表示しよう</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id25" name="id25">背景を表示しよう</a>
</h1><div class="para"><div>
　<a id="id26" name="id26" class="targanchor"><dfn>背景</dfn></a>というのは、要するに文字と前景の後ろに表示されるヤツです。KAG では、(デフォルトでは) 640×480 のサイズの画像を背景として読み込みます。<br />
<br />
　ためしに、なにか表示させたい 640×480 の画像を bgimage フォルダにおいてみてください。この画像を bg0.jpg であるとします。KAG の LZH ファイルにはこの画像は入っていないので、適当にどこかから持ってきてくださいね(^^)<br />
　そして、<a target="main" class="jump" href="Letter.html">文字を表示しよう</a> で使用したシナリオを、以下のように変えてみます。<br />

<br />
<code class="bq"><em>[image&nbsp;storage=&quot;bg0&quot;&nbsp;page=fore&nbsp;layer=base]</em><br />
[wait&nbsp;time=200]<br />
*start|スタート<br />
[cm]<br />
こんにちは。<br />
</code>
<br />

　ここで <a id="id27" name="id27" class="targanchor"><dfn>image</dfn></a> というタグを使用して、bg0.jpg を表ページの背景レイヤに読み込んでいます。<br />
　image タグの storage 属性で指定したファイルを読み込むのですが、拡張子は省略できます。勝手に KAG が探してきます(^^)<br />
<br />
　とりあえず実行してみてください。<br />
<br /><div class="descimg"><img width="325" height="265" alt="BG_Displayed.jpg" src="BG_Displayed.jpg" /><br />背景を表示した</div><br />　で、「表ページ」「背景レイヤ」ってなに？ってことになるのですが・・・<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　Config.tjs の scWidth および scHeight で、画面サイズに 640x480 以外の画面サイズを指定した場合は、もちろんその画像サイズに合った背景画像を指定してください。<br />
</div><br />
</div></div>
<h1><a id="id28" name="id28">KAG のレイヤ構成</a>
</h1><div class="para"><div>
　KAG というか吉里吉里は、画面はすべて「レイヤ」と呼ばれるものを重ね合わせて構成されます ( Photoshop 等のレイヤーと似ています; レイヤーをレイヤと書くのは作者のクセ )。<br />
<br />
<br />
　たとえば、以下のような表示になっていたとすると・・・<br />
<br />
<br /><div class="descimg"><img width="480" height="360" alt="Layers.jpg" src="Layers.jpg" /><br />表示例</div><br /><br />
　レイヤ構成は以下のようになっています。<br />
<br />
<br /><div class="descimg"><img width="483" height="452" alt="LayersDesc.jpg" src="LayersDesc.jpg" /><br />レイヤ構成</div><br /><br />
　KAG では、<a id="id29" name="id29" class="targanchor"><dfn>背景レイヤ</dfn></a> base がまず一枚あって、一番奥(下)に表示されます。それより手前(上)に３枚の<a id="id30" name="id30" class="targanchor"><dfn>前景レイヤ</dfn></a> 0 1 2 があります。さらにその手前(上)に２枚の<a id="id31" name="id31" class="targanchor"><dfn>メッセージレイヤ</dfn></a>があります。すべての前景レイヤと、メッセージレイヤ 1 は初期状態では非表示です ( 非表示のレイヤは layopt タグで visible=true とすることで表示することができます。前景レイヤの場合は image タグでも表示することができます )。<br />
　これと同じレイヤ構成が KAG では２組あって、それぞれ<a id="id32" name="id32" class="targanchor"><dfn>表ページ</dfn></a> fore 、<a id="id33" name="id33" class="targanchor"><dfn>裏ページ</dfn></a> back と呼ばれています。表ページは画面に表示されますが、裏ページは画面に表示することはできません。裏ページは、主にトランジション(画面切り替え)用に、画像を一時的においておくために使います。<br />
<br />
　image タグの page 属性及び layer 属性で指定していたのは、それぞれ、表ページが裏ページか ( fore / back )、背景レイヤか前景レイヤか ( base / 0 / 1 / 2 )かを指定したわけです。<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　前景レイヤ 3 枚、メッセージレイヤ 2 枚という数は、Config.tjs のデフォルトの設定です。<br />
　メッセージレイヤや前景レイヤの初期の枚数は Config.tjs の numCharacterLayers および numMessageLayers で指定できるほか、laycount タグで実行中に変更することもできます。<br />
</div><br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　「背景」「前景」「表」「裏」はそれぞれ混乱の元となりやすいですが、page 属性に指定する fore は「表画面」を表すもので、「前景レイヤ」を表すものではありません。<br />
　表ページか裏ページかは page 属性でそれぞれ fore, back で指定し、前景レイヤの場合は layer 属性に 0 1 2 ・・・を指定し、背景レイヤの場合は base を指定します。<br />
</div><br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
