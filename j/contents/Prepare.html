<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from Prepare.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>準備をしよう</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id129" name="id129">準備をしよう</a>
</h1><div class="para"><div>
　まず、吉里吉里 SDK のフォルダ ( <code class="inlinecode">krkr.eXe</code> のあるところ ) の下に、プロジェクト名をつけたフォルダを作りましょう。プロジェクト名は何でもいいです。ただし、&quot;<code class="inlinecode">data</code>&quot; というフォルダ名は避けてください ( <code class="inlinecode">data</code> というフォルダ名にするのは必要に応じて配布する時にそうします )。このフォルダを<a id="id130" name="id130" class="targanchor"><dfn>プロジェクトフォルダ</dfn></a>と呼びます。<br />
<br />
　そうしたら、そのフォルダの下に、KAG のシステムをコピーします。<code class="inlinecode">template</code> というフォルダが、ダウンロードした KAG の LZH ファイルを展開するとあるはずです。その<em>中身</em>( <code class="inlinecode">template</code> フォルダごとではなくて ) をこのプロジェクトフォルダにコピーします。<br />
<br />
　配置は以下のようになります。<br />
<br /><div class="descimg"><img width="314" height="275" alt="Folders.png" src="Folders.png" /><br />ファイルをコピーした</div><br />　そうしたら、<code class="inlinecode">system</code> フォルダの中に <code class="inlinecode">Config.~new</code> というファイルがありますので、それを <code class="inlinecode"><a id="id131" name="id131" class="targanchor"><dfn>Config.tjs</dfn></a></code> に改名してください。それから、テキストエディタで <code class="inlinecode">Config.tjs</code> を開いてください。<br />
<br />
<br />
　<code class="inlinecode">Config.tjs</code> はそのほかにもいろいろと設定する箇所があって、後々いじる事になると思います。詳しい説明は <code class="inlinecode">Config.tjs</code> 内に書いてありますのでそちらを参照してください。<br />
<br />
<br />
　なお、コピーしたフォルダの中に「〜このファイルは削除してかまいません〜」というファイルがある場合がありますが、これはアーカイブ展開ソフトが、空のフォルダを展開しない場合があるために置いてあるダミーのファイルです。削除してかまいません ( そのままにしておいても特に問題はありません )。<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　KAG のアップデートをする場合は、基本的には、新しい KAG の <code class="inlinecode">system</code> フォルダの中身を、既存の <code class="inlinecode">system</code> フォルダに上書きするだけで OK です。新しくした後の初回の実行で自動的に古い <code class="inlinecode">Config.tjs</code> の引継が行われますので、画面の指示に従ってください。<br />
</div><br />
</div></div>
<h1><a id="id132" name="id132">フォルダの説明</a>
</h1><div class="para"><div>
　コピーすると、いくつかのフォルダも一緒にコピーされます。各フォルダの説明をします。<br />
　これらのフォルダの通りにしなくても本当はいいのですが、フォルダの配置を換える場合は <code class="inlinecode"><a id="id133" name="id133" class="targanchor"><dfn>Initialise.tjs</dfn></a></code> の内容も変更しなければならない場合があります。詳しくは <code class="inlinecode">Initialise.tjs</code> の内容をご覧ください ( .tjs ファイルはテキストファイルですので、テキストエディタで開きます )。<br />
　なお、これらのフォルダのどこに何を入れても、KAG のファイル指定ではフォルダ名を指定する必要はありません。別に <code class="inlinecode">bgimage</code> フォルダに MIDI ファイルが入っていてもかまわないです。ただ、便宜上、あらかじめフォルダが作ってあるだけですので<code class="inlinecode">(^^)</code><br />
<br />
　これらのフォルダは空のままでも問題はありません。必要のないフォルダは削除しても OK です。<br />
<br />
<dl>
<dt><img width="16" height="16" alt="folder.png" src="folder.png" /> <a id="id134" name="id134" class="targanchor"><dfn>system フォルダ</dfn></a></dt>
<dd>　<code class="inlinecode">system</code> フォルダには KAG の動作に必要なシステムが入っています。</dd>
<dt><img width="16" height="16" alt="folder.png" src="folder.png" /> <a id="id135" name="id135" class="targanchor"><dfn>scenario フォルダ</dfn></a></dt>
<dd>　<code class="inlinecode">scenario</code> フォルダには、シナリオファイルを入れます。シナリオファイルは、KAG で画面に表示する文章を指定したり、どの画像を表示するかなどの指示をタグを使って埋め込んだ、拡張子が .ks のファイルです。<br />
　ちなみに吉里吉里を立ち上げたときに指定するのは「プロジェクトフォルダ」であって個々のシナリオファイルではありません。</dd>
<dt><img width="16" height="16" alt="folder.png" src="folder.png" /> <a id="id136" name="id136" class="targanchor"><dfn>bgimage フォルダ</dfn></a></dt>
<dd>　表示する背景画像を入れておくフォルダです。</dd>
<dt><img width="16" height="16" alt="folder.png" src="folder.png" /> <a id="id137" name="id137" class="targanchor"><dfn>fgimage フォルダ</dfn></a></dt>
<dd>　表示する前景画像 (キャラの立ちポーズなど) を入れておくフォルダです。</dd>
<dt><img width="16" height="16" alt="folder.png" src="folder.png" /> <a id="id138" name="id138" class="targanchor"><dfn>image フォルダ</dfn></a></dt>
<dd>　その他の画像 (たとえば一枚絵) などを入れておくフォルダです。</dd>
<dt><img width="16" height="16" alt="folder.png" src="folder.png" /> <a id="id139" name="id139" class="targanchor"><dfn>bgm フォルダ</dfn></a></dt>
<dd>　BGM (バックグラウンドミュージック)のデータを入れておくフォルダです。</dd>
<dt><img width="16" height="16" alt="folder.png" src="folder.png" /> <a id="id140" name="id140" class="targanchor"><dfn>sound フォルダ</dfn></a></dt>
<dd>　効果音のデータを入れておくフォルダです。</dd>
<dt><img width="16" height="16" alt="folder.png" src="folder.png" /> <a id="id141" name="id141" class="targanchor"><dfn>rule フォルダ</dfn></a></dt>
<dd>　ユニバーサルトランジションのルール画像を入れておくフォルダです。</dd>
<dt><img width="16" height="16" alt="folder.png" src="folder.png" /> <a id="id142" name="id142" class="targanchor"><dfn>others フォルダ</dfn></a></dt>
<dd>　その他。</dd>
<dt><img width="16" height="16" alt="folder.png" src="folder.png" /> <a id="id143" name="id143" class="targanchor"><dfn>video フォルダ</dfn></a></dt>
<dd>　動画ファイルを置いておきます。</dd></dl></div></div>
<h1><a id="id144" name="id144">扱える画像形式</a>
</h1><div class="para"><div>
　KAG ( というか吉里吉里 ) で扱える画像形式は以下の通りです。<br />
　<a target="main" class="jump" href="GraphicFormats.html">画像形式について</a> もご覧ください。<br />
<br />
<dl>
<dt><a id="id145" name="id145" class="targanchor"><dfn>BMP 画像</dfn></a></dt>
<dd>　拡張子は .bmp または .dib です。吉里吉里では、無圧縮の BMP のみサポートしています。<br />
　32bit (32bpp) の BMP はアルファチャネル付きビットマップとして見なされます。</dd>
<dt><a id="id146" name="id146" class="targanchor"><dfn>JPEG 画像</dfn></a></dt>
<dd>　拡張子は .jpeg または .jpg です。様々なグラフィックツールの出力する JPEG 画像を扱うことができます。</dd>
<dt><a id="id147" name="id147" class="targanchor"><dfn>Portable Network Graphic 画像</dfn></a> ( <a id="id148" name="id148" class="targanchor"><dfn>PNG 画像</dfn></a> )</dt>
<dd>　拡張子は .png です。様々なグラフィックツールで出力できます。アルファチャネルや透明色指定にも対応しています。</dd>
<dt><a id="id149" name="id149" class="targanchor"><dfn>Entis Rasterized Image format 画像</dfn></a> ( <a id="id150" name="id150" class="targanchor"><dfn>ERI 画像</dfn></a> ) </dt>
<dd>　拡張子は .eri です。Leshade Entis 氏 により開発・考案された可逆画像圧縮技術・フォーマットです。通称「恵理ちゃん」です。<br />
　画像コンバータなどのユーティリティ類は「恵理ちゃんclub」 <a target="_top" class="jump" href="http://www.entis.jp/eri/">http://www.entis.gr.jp/eri/</a> から入手できます。<br />
<br />
　この画像圧縮形式を用いる場合は、著作権関係で<em>特に</em>注意が必要です。詳しくは 吉里吉里 SDK Help の「使用条件等」および上記「恵理ちゃん club」をご覧ください。</dd>
<dt><a id="id151" name="id151" class="targanchor"><dfn>TLG5 画像</dfn></a></dt>
<dd>　拡張子は .tlg です ( .tlg5 ではありません )。吉里吉里独自の可逆画像圧縮形式で、高速に展開できるのが特徴です。フルカラー画像と、アルファチャンネル付きのフルカラー画像に対応しています。</dd>
<dt><a id="id152" name="id152" class="targanchor"><dfn>TLG6 画像</dfn></a></dt>
<dd>　拡張子は .tlg です ( .tlg6 ではありません )。吉里吉里独自の可逆画像圧縮形式で、高い圧縮率と比較的高速な展開が特徴です。フルカラー画像と、アルファチャンネル付きのフルカラー画像に対応しています。</dd>
<dt>その他の画像</dt>
<dd>　<a id="id153" name="id153" class="targanchor"><dfn>Susie Plug-in</dfn></a> を使えば、これら以外の画像形式にも対応できます。Susie Plug-in は、吉里吉里の実行可能ファイル krkr.eXe と同じフォルダか、その下の <code class="inlinecode">plugin</code> フォルダか、プロジェクトフォルダに置いてください。(それと、後述の「プラグインについて」を参照してください )</dd></dl></div></div>
<h1><a id="id154" name="id154">扱えるオーディオ形式</a>
</h1><div class="para"><div>
<br />
　KAG ( というか吉里吉里 ) で扱えるオーディオ形式は以下の通りです。<br />
　効果音には PCM のみを使用できます。<br />
　BGM にどの形式を使うかによって、KAG の Congif.tjs の変更が必要になります。詳しくは Config.tjs の内容をご覧ください。<br />
<br />
<dl>
<dt><a id="id155" name="id155" class="targanchor"><dfn>PCM</dfn></a></dt>
<dd>　標準では、無圧縮の RIFF-WAVE ( 拡張子は .wav ) を再生することができます。<br />
<br />
　無圧縮の RIFF-WAVE 以外には Ogg Vorbis ( *.ogg ) 、TCWF ( *.tcw )、Microsoft ADPCM ( *.wav ) などを再生できますが、プラグインが必要になります。<br />
　プラグインは吉里吉里２配布ファイルとして、Ogg Vorbis用 ( wuvorbis.dll )、TCWF用 ( wutcwf.dll )、Microsoft ADPCM用 ( wumsadp.dll ) が添付されています。<br />
<br />
　Ogg Vorbis は、特許・特許料フリーの圧縮音楽形式で、MP3 と同等の使い方をすることができます。エンコーダは <a target="_top" class="jump" href="http://www.vorbis.com/">http://www.vorbis.com/</a> から入手できます。<br />
<br />
　そのほかのプラグイン ( もし、あれば ) を使用して再生可能な形式を増やすこともできます。プラグインについては各プラグインの説明書の他、後述の「プラグインについて」を参照してください。<br />
<br />
　無圧縮 Wave, Ogg Vorbis, TCWF, Microsoft ADPCM の各形式は、Loop Tuner ( サポートページから入手可能 ) を用いてループの情報を作成することにより、ループ位置を細かく指定する事ができます。これにより、ループのつなぎ目を感じさせないループ演奏が可能になります。</dd>
<dt><a id="id156" name="id156" class="targanchor"><dfn>MIDIシーケンスデータ</dfn></a></dt>
<dd>　Standerd MIDI Format ( 拡張子は .smf または .mid ) を再生することができます。クロスフェードを行いたい場合は若干の注意が必要です、詳しくは 吉里吉里 SDK Help の「MIDI サウンドバッファについて」をご覧ください。</dd>
<dt><a id="id157" name="id157" class="targanchor"><dfn>CD-DA</dfn></a></dt>
<dd>　<a id="id158" name="id158" class="targanchor"><dfn>CD-XA</dfn></a> の CD-DA 部分を再生することができます。CD-XA は、CD-ROM としてコンピュータ用のデータと、CD-DA としてオーディオのデータが同居する形式の CD です。吉里吉里は、使用可能な CD-ROM ドライブの検索に CD-ROM のコンピュータ用のデータとしてのボリュームラベルを元に検索を行うので、CD-XA 形式の CD でないと扱うことができません。 ( もっともこのチュートリアル内で行うようにドライブ名を明示するならば再生できますが・・・ )</dd></dl></div></div>
<h1><a id="id159" name="id159">扱えるムービー形式</a>
</h1><div class="para"><div>
<dl>
<dt><a id="id160" name="id160" class="targanchor"><dfn>MPEG I</dfn></a></dt>
<dd>　一般的な MPEG I に対応しています。<br />
　ただし、配布時には、 <a id="id161" name="id161" class="targanchor"><dfn>krmovie.dll</dfn></a> を吉里吉里実行可能ファイルと同じ場所に置いておく必要があります。また、ムービーの再生には DirectX 8 が、再生する環境側に必要になります。<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　オーディオとマルチプレクシングを行っていない、ビデオのみの MPEG I ストリームの拡張子は .mpeg/.mpg ではなくて .mpv にしてください。吉里吉里は 拡張子でビデオ形式を判断します。<br />
</div><br />
</dd>
<dt><a id="id162" name="id162" class="targanchor"><dfn>WMV</dfn></a></dt>
<dd>　WMV に対応しています。<br />
　再生可能な WMV のバージョンは、システムにインストールされている Media Player や DirectX に依存しますが、DirectX 9 以降がインストールされている環境を推奨します。</dd></dl><br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　吉里吉里はReleaserで作成したアーカイブや実行可能ファイル内にビデオが格納されていても、直接アーカイブから (テンポラリファイルを介することなく) ムービーを再生できます。ただし、Releaser ではムービーファイルは「圧縮しない」に分類する必要があります (デフォルトの分類では圧縮しない設定に自動的になります )。<br />
</div><br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　AVI形式のムービーはサポート外です。</div><br />
</div></div>
<h1><a id="id163" name="id163">Flash</a>
</h1><div class="para"><div>
<dl>
<dt><a id="id164" name="id164" class="targanchor"><dfn>SWF</dfn></a></dt>
<dd>　Macromedia Flash の再生に対応しています。<br />
　ただし、配布時には <a id="id165" name="id165" class="targanchor"><dfn>krflash.dll</dfn></a> を吉里吉里実行可能ファイルと同じ場所に置いておく必要があります。また、SWF の再生には Flash Player がインストールされている必要があります。<br />
　Flash の再生方法はビデオと同じ扱いです。</dd></dl><br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　Flash への対応は完全なものではありません。キーボード入力を必要とするような Flash コンテンツは正常に動作しない可能性があります。また、XP3 などのアーカイブ内に SWF ファイルが格納されていた場合は、いったんテンポラリファイルに書きだして使用するため、大きな SWF ファイル ( 3〜5MB を越えるもの ) はアーカイブに格納しない方が良いかと思います。<br />
</div><br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　作者は Flash の制作環境を持っていないのでテストしていませんが、Flash コンテンツの制御で KAG シナリオの任意のラベルにジャンプさせることができます。Action Get URL ( URL 表示のアクション ) に、URL として <code class="inlinecode"><em>FSCommand:Go</em></code> を、表示先のウィンドウとして 「シナリオファイル/ラベル」の形式で文字列を指定します ( 例: <code class="inlinecode"><em>first.ks/label2</em></code> )<br />
　<code class="inlinecode"><em>FSCommand:Eval</em></code> で、表示先ウィンドウとして TJS 式を指定すると、アクションが発生したときに任意の TJS 式を実行することができます ( 変数に値を代入するとか )。<br />
　openvideo タグまたは playvideo タグで、storage 属性でファイル名に続き ? を書き、その後に Flash に渡すパラメータを指定することができます ( 例 : <code class="inlinecode">hoge.swf?name=value&amp;param=content</code> )。<br />
</div><br />
</div></div>


<h1><a id="id166" name="id166">扱えるアーカイブ形式</a>
</h1><div class="para"><div>
<dl>
<dt><a id="id167" name="id167" class="targanchor"><dfn>XP3</dfn></a> と <a id="id168" name="id168" class="targanchor"><dfn>PEXP3</dfn></a></dt>
<dd>　吉里吉里独自のアーカイブ形式である XP3 形式を扱うことができます。<br />
　PEXP3 は「吉里吉里実行可能ファイル」と XP3 形式が組合わさった形式で、単体の実行可能ファイル中に作品を納められるものです。<br />
　どちらの形式も吉里吉里 SDK 付属の Releaser で作成できます。</dd>
<dt>その他のアーカイブ形式</dt>
<dd>　<a id="id169" name="id169" class="targanchor"><dfn>Susie Plug-in</dfn></a> を使えば、これら以外のアーカイブ形式にも対応できます。(後述の「プラグインについて」を参照してください )</dd></dl></div></div>


<h1><a id="id170" name="id170">レンダリング済みフォント</a>
</h1><div class="para"><div>
　レンダリング済みフォントは、制作者側で作成したフォントデータです。これを使用することで、常に制作者側の意図したフォントで、OS や環境に影響されることなく表示をすることができます。また、外字も自由に使用することができます。<br />
　レンダリング済みフォントは <a id="id171" name="id171" class="targanchor"><dfn>krkrfont.exe</dfn></a> で作成します。作成するとき、縦書きに使用するフォントは @ の頭に着いたフォントにしてください。<br />
<br />
　レンダリング済みフォントファイルは .tft の拡張子を持っています。使用する場合は others フォルダなどにおき、mappfont タグで任意のフォントに割り当ててください。<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　レンダリング済みフォント作成ツールの使い方は吉里吉里 SDK ヘルプを参照してください。<br />
</div><br />
</div></div>
<h1><a id="id172" name="id172">プラグインについて</a>
</h1><div class="para"><div>
　Susie-Plugin あるいは PCM の再生可能な形式を拡張するためのプラグイン、もしくはその他のプラグインは、<a id="id173" name="id173" class="targanchor"><dfn>loadplugin</dfn></a> タグで指定しないと使用可能になりません。<br />
<br />
　たとえば、wuvorbis.dll を使いたい場合は、<br />
<br />

<br />
<code class="bq">@loadplugin&nbsp;module=wuvorbis.dll<br />
</code>
<br />

<br />
　と記述します。<br />
<br />
　また、プラグインは、<ul><li>吉里吉里実行可能ファイル ( krkr.eXe ) と同じ場所</li><li>実行可能ファイルのあるフォルダ以下の <a id="id174" name="id174" class="targanchor"><dfn>plugin フォルダ</dfn></a></li><li>プロジェクトフォルダ</li></ul>　のいずれかに置いておく必要があります。プロジェクトフォルダに置いた場合は Releaser でアーカイブ内あるいは実行可能ファイル内に含まれる事になりますが、<em>推奨されません</em>。できればアーカイブ内には含めず、本体と一緒のフォルダに配置して配布するのが良いでしょう ( アーカイブ内に含めると CD-ROM 上から直接実行する際などにエラーになります )。<br />
<br />
　krmovie.dll や krflash.dll はプラグインではないので、loadplugin タグで指定する必要はありません。<br />
<br />
　吉里吉里 SDK ヘルプの「プラグインについて」もご覧ください。<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　吉里吉里１の場合は実行可能ファイルと同じ場所に置くだけで使用可能になりましたが、吉里吉里２の場合は明示的にプラグインを指定する必要があります。<br />
</div><br />
</div></div>
<h1><a id="id175" name="id175">UNICODEへの対応</a>
</h1><div class="para"><div>
　シナリオファイルや TJS スクリプトを編集するため、テキストエディタが必要になります。<br />
　普通は普段お使いのお手持ちのテキストエディタで問題ありませんが、吉里吉里が出力するコンソールのログファイルや KAG のセーブデータは UNICODE で出力されるため、UNICODE テキストを編集したい場合は UNICODE に対応したテキストエディタが必要になります。<br />
　また、シナリオファイルや TJS スクリプトに日本語文字 (ここでいう日本語文字とは日本語版 Windows で通常使える文字) 以外を記述したい場合は、これらを UNICODE テキストで記述する必要があります。<br />
<br />
　日本語文字以外の言語を表示するためにはいくつか条件があります。<br />
<br />
<ul><li>該当するシナリオファイルや TJS スクリプトファイルが UNICODE で記述されていること ( UNICODE で書かれたテキストファイルとそうでないテキストファイルが混在していてもかまいません )</li><li>レンダリング済みフォントファイルを使わない場合は、ゲームをプレイする側の OS が Windows NT 系 ( Windows 2000 や Windows XP, Vista 以降 ) であること ( レンダリング済みフォントファイルを使用する場合はプレイする側の OS は関係ありません )</li><li>表示しようとする言語の文字を含んだフォントを指定すること</li><li>表示しようとする言語が左から右へ書く(横書き)言語あるいは上から下へ書く(縦書き)言語であること</li></ul><br />
　どの場合も、日本語以外の文字を表示できるのはゲームの画面内ぐらいで、ウィンドウのタイトルバーやメニュー項目など、Windows 標準のユーザインターフェースを使用している部位には日本語文字しか表示できません。また、edit タグで生成されるエディットに入力できる文字は日本語文字だけです。<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　上では日本語文字と書きましたが、基本的に吉里吉里はそれが実行されている OS の言語ロケールに従います ( 日本語版 Windows ならば 日本語文字、中文版Windowsならば中文など )。ただし作者はチェックしてません。<br />
</div><br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　現在の吉里吉里/KAG は Windows 上でのみ動作するため、とりあえず UNICODE というとリトルエンディアンの UTF-16 のことです ( ただしサロゲートペアは使用できません )。<br />
　また、吉里吉里は、UNICODE テキストはリトルエンディアンの UTF-16で、さらに BOM ( Byte Order Mark ) が先頭にないと文字コードを正常に識別できません ( 現状ではビッグエンディアンの UTF-16 はたとえ正式な BOM がついていたとしても読み込むことができません )。<br />
</div><br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
