<?xml version="1.0" encoding="UTF-8" ?>

<doc>
<title>Let's support save / load</title>

<para>
<ptitle>KAG's Shiori</ptitle>
　KAG compares the save / load of a game to a "?" (If you are not satisfied with this notation, rewrite MainWindow.tjs.)<r/>
<r/>
　See also <link href="SaveData"/> for bookmark data.<r/>
<r/>
　Unfortunately, saving and loading with KAG is not possible anywhere. Be sure to use the <kw>saveable label</kw> as a landmark to save and load a "place".<r/>
<r/>
　... However, the save / load itself can be done almost at any time with the menu "Shiori Shiori" and "Follow the Shiori" Will be saved.<r/>
　Therefore, even if a player saves a little away from the "place", when he loads it will start again from the last "place" that he passed.<r/>
<r/>
　The place for that save is the label. However, the label for the save location is written a little differently from a normal label.<r/>
<r/>
　See the example below.<r/>
<r/>
<bq>
[wait time=20]<r/>
<b>*start|Start</b><r/>
[cm]<r/>
Here is the start[l][r]<r/>
<r/>
<b>*label2|Save location 2</b><r/>
[cm]<r/>
This is save place 2[l][r]<r/>
<r/>
<b>*label3|Save location 3</b><r/>
[cm]<r/>
This is save place 3[l][r]<r/>
[jump target=*start]<r/>
</bq>
<r/>
　In this way, specify | (vertical bar) after the label, and then add the name of the save location as "<kw>headline</kw>". Headings can have duplicate names. The headline is also displayed at the menu item in the "insert bookmark" menu, so it should be named easily for the user. Also, it is the default file name in free save mode.<r/>
　If you want to jump to a label with | using a jump tag, do not specify anything after |. In the above, it is [jump target=*start], but when specifying a label with the target attribute like this, |<r/>
<r/>
　Headings can be omitted, for example:<r/>
<bq>
*label|<r/>
</bq>
　In this case, the heading from the previous pass is taken over.<r/>
<r/>
　You can also add &amp; after | to make the contents of a variable a heading. For example,<r/>
<bq>
*label|&amp;f.title<r/>
</bq>
　Will use the contents of the f.title variable as the heading.<r/>
<r/>
　Label names (parts before |) must not have duplicate names in the same scenario file (duplicate names in different scenario files are OK). On the other hand, headings are only handled internally, so it is OK if only the side who creates the scenario file is careful.<r/>
　Also, be sure to write [cm] after such labels.<r/>
<note>
　[ct] may be used instead of [cm]. The difference between the two is that ct sets the target message layer to message0 on the front page, while cm clears all message layers and does not change the target message layer.<r/>
　You must write a tag to clear such a message layer because <b>what is written in the message layer is not saved in the bookmark</b>.<r/>
　In addition, we recommend that you do not write between "tags that take some time to process" and "tags that wait for it", such as writing a saveable label between the trans tag and the wt tag.
</note>
<r/>
　Also, it is not possible to save at a label where only the label name is normally written without |.<r/>
<r/>
　...this is the only thing to note <tt>(^^)</tt><r/>
<r/>
　The more labels you save, the more places you can save. You just create a label, and you don't have to write a tag that jumps to it if you make it separately.<r/>
　Note, however, that you must always write [cm] after such a label.<r/>
<note>
　Internally, when a KAG passes through a (savable) label with |, the KAG saves its current state internally. When the user chooses to save the bookmark, the data at that time is saved.
</note>
</para>

<para>
<ptitle>Using the disablestore tag</ptitle>
　The <kw>disablestore</kw> tag temporarily disables the "insert bookmark" feature.<r/>
　There is no need to write saveable labels before entering the main game, for example, it is possible to save bookmarks in the main menu, etc., so there is no need to write in such places.<r/>
　KAG will not be able to use the "insert bookmark" function if it has not passed a saveable label since it was started.<r/>
　So, before entering the main part of the game, you do not have to write a saveable label anywhere, but if you finish the game and return to the main menu, you will have passed the saveable label And you can put a bookmark on the main menu.<r/>
　In order to prevent this, do not write a saveable label until you enter the main game, and describe <tt>[disablestore]</tt> in the main menu etc. to disable the function of "insert bookmark".<r/>
　If <tt>[disablestore]</tt> is described, the "insert bookmark" function will not be available as long as it does not pass the saveable label, just like when starting KAG.<r/>
</para>

<para>
<ptitle>Using the startanchor tag</ptitle>
　The <kw>startanchor</kw> tag enables the Back to Menu menu.<r/>
　The menu bar in KAG has "System | Return to beginning...".<r/>
　This menu cannot be selected as it is.<r/>
　To specify the return destination, write the <tt>[startanchor]</tt> tag where you want to return when the "return to first" menu is selected. Write this tag after the saveable label. After this <tt>[startanchor]</tt>, the "Return to Start" menu will be available.<r/>
　If you do not want to use the "return to the beginning" function in the main menu, write <tt>[startanchor enabled=false]</tt>. In this case, the "return to the beginning" function will be disabled unless you pass the <tt>[startanchor]</tt> description again.<r/>
<r/>
　"Return to the beginning" is similar to following the bookmark at the location where the startanchor tag is written, except that all game variables <comlink href="Var"/> are kept (retained).<r/>
</para>

<para>
<ptitle>Duplicate or omitted label names</ptitle>
　If the same label name (the part before |) is present in the same scenario file, the first label remains as it is, but the next label has A serial number such as <tt>:2</tt> or <tt>:3</tt> is automatically assigned.<r/>
　For example,<r/>
<r/>
<bq>
<b>*start|Start</b><r/>
<b>*start|Save location 2</b><r/>
<b>*start|Save location 3</b><r/>
</bq>
<r/>
The first *start is "<tt>*start</tt>", but if you want to jump to the next *start, use "<tt>*start:2</tt> in the target attribute etc. Next is "<tt>*start:3</tt>".<r/>
<r/>
　If you omit the label name, the same thing as the previous label name is assumed, and a serial number will be added.
　For example,<r/>
<r/>
<bq>
<b>*start|Start</b><r/>
<b>*|Save location 2</b><r/>
<b>*|Save location 3</b><r/>
</bq>
<r/>
　The second label would be "<tt>*start:2</tt>". The third label is "<tt>*start:3</tt>".<r/>
<r/>
　If you omit both the label and the heading, the format will be as follows.<r/>
<r/>
<bq>
<b>*start|Start</b><r/>
<b>*|</b><r/>
<b>*|</b><r/>
</bq>
<r/>
　This is convenient because it is not necessary to specify a different label name each time when writing a storable label, but since the labels are managed by serial numbers, edit the scenario file and change the number of labels in the middle. If you decrease or increase it, you may not be able to return to the original position when following the bookmark, or you may not be able to return to the original position with the return tag.<r/>
<r/>
<note>
If the heading is omitted, the heading of the saveable label that passed immediately before will be taken over, whereas if the label name is omitted, the previous label name in the scenario file will be used regardless of whether it has passed or not. Take over.<r/>
</note>

</para>

</doc>
